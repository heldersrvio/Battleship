!function(e){var t={};function a(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.l=!0,l.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);var n=()=>{let e=Array(100).fill({ship:null,index:null,status:"available"});const t=t=>e[t],a=e=>{let t=[];return[e-1,e+1,e-10,e+10,e-11,e-9,e+9,e+11].forEach(a=>{a>=0&&a<100&&(e%10!=9&&e%10!=0?t.push(a):e%10==9?a%10!=0&&t.push(a):a%10!=9&&t.push(a))}),t};return{getPosition:t,placeShip:(n,l,s)=>{const i=((e,t)=>{const a=t-e;let n=[];if(a<0)return n;if(a<=4)for(let a=e;a<=t;a++)n.push(a);else if(a%10==0&&a<=40)for(let a=e;a<=t;a+=10)n.push(a);return n})(l,s),r=e.slice(0);let d=!1;return i.length===n.length&&(0!==i.length&&(i.forEach(e=>{if(null!==t(e).ship)return d=!0,!1;a(e).forEach(e=>{if(null!==t(e).ship)return d=!0,!1})}),!d&&(i.forEach((e,t)=>{r[e]={ship:n,index:t,status:"available"}}),e=r,!0)))},receiveAttack:n=>{if("available"===t(n).status){const l=null===t(n).ship?"missed":"hit";return((t,a)=>{const n=e.slice(0);n[a]={ship:n[a].ship,index:n[a].index,status:t},e=n})(l,n),"hit"===l&&(t(n).ship.hit(t(n).index),t(n).ship.isSunk()&&(n=>{const l=e.slice(0);e.forEach((e,s)=>{e.ship===n&&a(s).forEach(e=>{null===t(e).ship&&"available"===t(e).status&&(l[e]={ship:null,index:null,status:"unavailable"})})}),e=l})(t(n).ship)),l}return null},allShipsSunk:()=>{let t=!1;return e.forEach(e=>{null===e.ship||e.ship.isSunk()||(t=!0)}),!t}}};var l=(e,t)=>{const a=(e,t)=>Array(100).fill(0).map((e,t)=>t).filter(a=>e.getPosition(a).status===t);return{name:e,randomMove:e=>{if(!t)return null;const n=a(e,"available"),l=a(e,"hit");if(0!==l.length){const e=n.filter(e=>l.some(t=>(e=>{let t=[];return[e-1,e+1,e-10,e+10].forEach(a=>{a>=0&&a<100&&(e%10!=9&&e%10!=0?t.push(a):e%10==9?a%10!=0&&t.push(a):a%10!=9&&t.push(a))}),t})(e).includes(t)));if(0!==e.length)return e[Math.floor(Math.random()*e.length)]}return n[Math.floor(Math.random()*n.length)]}}};var s=e=>{const t=e;let a=[];return{length:t,getWhereHit:()=>a,hit:e=>{e<t&&!a.includes(e)&&(a=a.concat([e]))},isSunk:()=>a.length===t}};var i=(e=>{const t=e.querySelector("body"),a=t=>{const a=e.getElementById("gameboards-container");null!==e.getElementById(t)&&a.removeChild(e.getElementById(t))},i=()=>{u(),d(),a("gameboard-one"),a("gameboard-two");const n=e.createElement("div");n.id="options";const l=e.createElement("button");l.classList.add("option-button"),l.textContent="Play against the computer",l.addEventListener("click",()=>{r(),p(!0,null,null)});const s=e.createElement("button");s.classList.add("option-button"),s.textContent="Play against someone else",s.addEventListener("click",()=>{r(),g()}),n.appendChild(l),n.appendChild(s),t.appendChild(n)},r=()=>{t.removeChild(e.getElementById("options"))},d=()=>{const a=e.querySelector("#play-again-button");null!==a&&t.removeChild(a)},o=e=>{[s(1),s(1),s(1),s(1),s(2),s(2),s(2),s(3),s(3),s(4)].forEach((t,a)=>{let n=Math.floor(100*Math.random());switch(t.length){case 1:for(;!1===e.placeShip(t,n,n);)n=Math.floor(100*Math.random());break;case 2:if(4===a)for(;n+1>99||!1===e.placeShip(t,n,n+1);)n=Math.floor(100*Math.random());else for(;n+10>99||!1===e.placeShip(t,n,n+10);)n=Math.floor(100*Math.random());break;case 3:if(7===a)for(;n+2>99||!1===e.placeShip(t,n,n+2);)n=Math.floor(100*Math.random());else for(;n+20>99||!1===e.placeShip(t,n,n+20);)n=Math.floor(100*Math.random());break;case 4:for(;n+30>99||!1===e.placeShip(t,n,n+30);)n=Math.floor(100*Math.random())}})},c=()=>{const a=e=>{e.preventDefault()},i=t=>{const a=t.dataTransfer.getData("text"),n=e.getElementById(a),l=Number(t.target.id.slice(7));let s=[l];const i=Number(n.parentNode.id.slice(7));let r=[i];n.classList.contains("vertical")?(s.push(l+10),r.push(i+10),n.classList.contains("draggable-ship-3")&&(s.push(l+20),r.push(i+20)),n.classList.contains("draggable-ship-4")&&(s.push(l+20,l+30),r.push(i+20,i+30))):n.classList.contains("horizontal")&&(s.push(l+1),r.push(i+1),n.classList.contains("draggable-ship-3")&&(s.push(l+2),r.push(i+2)));const d=(t=>{let a=[];return t.forEach(t=>{for(let n=2;n<5;n++)[t-10*n,t-10*n-1,t-10*n+1].forEach(t=>{const l=e.getElementById("square-"+t);null!==l&&null!==l.firstChild&&l.firstChild.classList.contains("vertical")&&(l.firstChild.classList.contains("draggable-ship-"+n)||l.firstChild.classList.contains("draggable-ship-"+(n+1))||l.firstChild.classList.contains("draggable-ship-"+(n+2)))&&a.push(t)}),[t-10-n,t+10-n].forEach(t=>{const l=e.getElementById("square-"+t);null!==l&&null!==l.firstChild&&l.firstChild.classList.contains("horizontal")&&(l.firstChild.classList.contains("draggable-ship-"+n)||l.firstChild.classList.contains("draggable-ship-"+(n+1)))&&a.push(t)});a=a.concat((e=>{let t=[];return[e-11,e-10,e-9,e-1,e+1,e+9,e+10,e+11].forEach(a=>{a>=0&&a<100&&(e%10!=9&&e%10!=0?t.push(a):e%10==9?a%10!=0&&t.push(a):a%10!=9&&t.push(a))}),t})(t))}),a})(s).filter(e=>!r.includes(e)).map(t=>e.getElementById("square-"+t));null!==t.target.firstChild||d.some(e=>null!==e.firstChild)||(n.classList.contains("draggable-ship-4")?l<=69&&(t.preventDefault(),t.target.appendChild(n)):n.classList.contains("draggable-ship-3")?l<=79&&(n.classList.contains("horizontal")?l%10<=7&&(t.preventDefault(),t.target.appendChild(n)):(t.preventDefault(),t.target.appendChild(n))):n.classList.contains("draggable-ship-2")?l<=89&&(n.classList.contains("horizontal")?l%10<=8&&(t.preventDefault(),t.target.appendChild(n)):(t.preventDefault(),t.target.appendChild(n))):(t.preventDefault(),t.target.appendChild(n)))},r=e=>{e.dataTransfer.setData("text",e.target.id)},d=e.createElement("div");d.id="gameboards-container";const c=e.createElement("div");c.classList.add("gameboard"),c.id="placement-board";for(let t=0;t<100;t++){const n=e.createElement("div");n.id="ship-"+t,n.addEventListener("dragstart",r);const l=e.createElement("div");switch(l.id="square-"+t,l.classList.add("cell"),l.classList.add("available"),l.addEventListener("dragover",a),l.addEventListener("drop",i),t){case 5:n.classList.add("draggable-ship-4"),n.classList.add("vertical"),n.draggable=!0,l.appendChild(n);break;case 17:n.classList.add("draggable-ship-3"),n.classList.add("vertical"),n.draggable=!0,l.appendChild(n);break;case 97:n.classList.add("draggable-ship-3"),n.classList.add("horizontal"),n.draggable=!0,l.appendChild(n);break;case 9:case 29:case 49:case 85:n.classList.add("draggable-ship-1"),n.draggable=!0,l.appendChild(n);break;case 54:case 56:n.classList.add("draggable-ship-2"),n.classList.add("vertical"),n.draggable=!0,l.appendChild(n);break;case 68:n.classList.add("draggable-ship-2"),n.classList.add("horizontal"),n.draggable=!0,l.appendChild(n)}c.appendChild(l)}d.appendChild(c),t.appendChild(d);const p=e.createElement("button");p.id="done-button",p.textContent="Placement Complete",p.addEventListener("click",t=>{const a=n(),i=n(),r=l("Player 1",!1),d=l("Player 2",!0);[...e.querySelectorAll(".cell")].filter(e=>null!==e.firstChild).forEach(e=>{const t=Number(e.id.slice(7)),n=e.firstChild;if(n.classList.contains("draggable-ship-1")){const e=s(1);a.placeShip(e,t,t)}else if(n.classList.contains("draggable-ship-2")){const e=s(2);n.classList.contains("horizontal")?a.placeShip(e,t,t+1):a.placeShip(e,t,t+10)}else if(n.classList.contains("draggable-ship-3")){const e=s(3);n.classList.contains("horizontal")?a.placeShip(e,t,t+1,t+2):a.placeShip(e,t,t+10,t+20)}else{const e=s(4);a.placeShip(e,t,t+10,t+20,t+30)}}),o(i),v("gameboard-one",a,i,!1,!1,()=>null,r.name,d.name),v("gameboard-two",i,a,!0,!0,()=>a.receiveAttack(d.randomMove(a)),d.name,r.name)}),t.appendChild(p)},p=(e,t,a)=>{if(e)c();else{m();const e=n(),s=n();l(t,!1),l(a,!1);o(e),o(s),v("gameboard-two",s,e,!1,!0,null,a,t),f(t)}},h=(a,n)=>{const l=e.createElement("div"),s=e.createElement("span");null!==n?(l.id="won-message",s.textContent=n+" won!"):a?(l.id="won-message",s.textContent="You won!"):(l.id="lost-message",s.textContent="You lost"),l.appendChild(s),t.appendChild(l),(()=>{const a=e.createElement("button");a.id="play-again-button",a.textContent="Play again",a.addEventListener("click",()=>{i()}),t.appendChild(a)})()},u=()=>{const a=e.getElementById("won-message")||e.getElementById("lost-message");null!==a&&t.removeChild(a)},g=()=>{const a=e.createElement("form");a.id="name-inputs-form";const n=e.createElement("div");n.id="name-inputs";const l=e.createElement("label");l.for="name1",l.textContent="Player 1: ",n.appendChild(l);const s=e.createElement("input");s.type="text",s.id="name1",s.required=!0,n.appendChild(s);const i=e.createElement("label");i.for="name2",i.textContent="Player 2: ",n.appendChild(i);const r=e.createElement("input");r.type="text",r.id="name2",r.required=!0,n.appendChild(r),a.appendChild(n);const d=e.createElement("input");d.type="submit",d.id="submit-button",d.addEventListener("click",t=>{t.preventDefault();const a=e.getElementById("name1"),n=e.getElementById("name2");a.checkValidity()&&n.checkValidity()&&p(!1,a.value,n.value)}),a.appendChild(d),t.appendChild(a)},m=()=>{t.removeChild(e.querySelector("form"))},f=a=>{const n=e.createElement("div");n.id="turn-message";const l=e.createElement("span");l.textContent=a+"'s turn",n.appendChild(l),t.appendChild(n)},b=()=>{t.removeChild(e.getElementById("turn-message"))},v=(n,l,s,i,r,d,o,c)=>{a("placement-board"),null!==e.querySelector("#done-button")&&t.removeChild(e.querySelector("#done-button"));const p=e.getElementById("gameboards-container")||e.createElement("div");p.id="gameboards-container";const u=e.createElement("div");u.classList.add("gameboard"),u.id=n;Array(100).fill(0).map((e,t)=>l.getPosition(t)).forEach((p,g)=>{const m=e.createElement("div");m.id="square-"+g,m.classList.add("cell"),m.classList.add(p.status),null!==p.ship&&m.classList.add("ship"),i&&r&&!l.allShipsSunk()&&!s.allShipsSunk()?m.addEventListener("click",e=>{let t=l.receiveAttack(g);if("hit"===t)a("gameboard-one"),v("gameboard-one",s,l,!i,!r,()=>{},c,o),a(n),v(n,l,s,i,r,d,o,c),l.allShipsSunk()?h(!0,null):s.allShipsSunk()&&h(!1,null);else if(null!==t){for(;"hit"===d();)a("gameboard-one"),v("gameboard-one",s,l,!i,!r,()=>{},c,o);a("gameboard-one"),v("gameboard-one",s,l,!i,!r,()=>{},c,o),a(n),v(n,l,s,i,r,d,o,c),l.allShipsSunk()?h(!0,null):s.allShipsSunk()&&h(!1,null)}}):null!==d||l.allShipsSunk()||s.allShipsSunk()||m.addEventListener("click",p=>{let u=l.receiveAttack(g);"hit"===u?(b(),a(n),v(n,l,s,i,r,d,o,c),l.allShipsSunk()?h(!0,c):s.allShipsSunk()?h(!1,o):f(c)):null!==u&&(b(),a(n),v(n,l,s,i,r,d,o,c),f(c),b(),a(n),(()=>{const a=e.createElement("div");a.id="pass-device-message";const n=e.createElement("span");n.textContent="Pass the device...",a.appendChild(n),t.appendChild(a)})(),setTimeout(()=>{t.removeChild(e.getElementById("pass-device-message")),v("gameboard-one"===n?"gameboard-two":"gameboard-one",s,l,!1,r,null,c,o),f(o)},2e3))}),u.appendChild(m)}),p.appendChild(u),t.appendChild(p)};return{renderOptionScreen:i,renderTitle:()=>{const a=e.createElement("div");a.id="title";const n=e.createElement("h1");n.textContent="Battleship",a.appendChild(n),t.appendChild(a)}}})(document);(()=>{i.renderTitle(),i.renderOptionScreen()})(!0,"helder","computer")}]);